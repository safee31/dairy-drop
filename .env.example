# ============================================
# DAIRY DROP E-COMMERCE - ENVIRONMENT CONFIG
# ============================================
# Copy this file to .env and update values
# Separate examples provided for DEV and PROD

# ============================================
# DEVELOPMENT ENVIRONMENT (.env.dev)
# ============================================

# Server Configuration
PORT=3000
NODE_ENV=development

# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/dairy_drop_db

# Session Configuration (Redis-based)
SESSION_EXPIRY=3600          # 1 hour for dev testing
STORAGE_TTL_SECONDS=3600     # 1 hour
REFRESH_EXPIRY=604800        # 7 days
MAX_SESSIONS_PER_USER=5
LOGIN_ATTEMPT_WINDOW=900     # 15 min
MAX_LOGIN_ATTEMPTS=5
COOKIE_MAX_AGE=3600000       # 1 hour in ms

# JWT Configuration
JWT_SECRET=dev_jwt_secret_change_in_production
JWT_ACCESS_SECRET=dev_access_secret_change_in_production
JWT_REFRESH_SECRET=dev_refresh_secret_change_in_production
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Cookie Configuration
COOKIE_SECRET=dev_cookie_secret_change_in_production
COOKIE_DOMAIN=localhost

# Rate Limiting
RATE_LIMIT_WINDOW_MS=15
RATE_LIMIT_MAX_REQUESTS=100
LOGIN_RATE_LIMIT_MAX_REQUESTS=5
OTP_RATE_LIMIT_MAX_REQUESTS=3
PASSWORD_RESET_RATE_LIMIT_MAX_REQUESTS=3

# Password Hashing
BCRYPT_SALT_ROUNDS=10

# Email Configuration
EMAIL_HOST=smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_SECURE=false
EMAIL_USER=dev_mailtrap_user
EMAIL_PASSWORD=dev_mailtrap_password

# CORS Configuration
ORIGIN_URL=http://localhost:3001
SERVER_URL=http://localhost:3000

# AWS Configuration (optional for dev)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=dev_access_key
AWS_SECRET_ACCESS_KEY=dev_secret_key
AWS_BUCKET_NAME=dairy-drop-dev

# Redis Configuration (Development - No TLS)
REDIS_URL=redis://localhost:6379
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=dev_redis_password
REDIS_DB=11
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000
REDIS_CONNECTION_TIMEOUT=5000

# OTP Configuration
OTP_LENGTH=4
OTP_EXPIRY_MINUTES=10
RESET_TOKEN_EXPIRY_MINUTES=5

# Feature Flags
ALLOW_UNVERIFIED_LOGIN=true

# ============================================
# PRODUCTION ENVIRONMENT (.env.prod)
# ============================================

# Server Configuration
# PORT=3000
# NODE_ENV=production

# Database Configuration
# DATABASE_URL=postgresql://prod_user:STRONG_PROD_PASSWORD@prod-db.aws.rds.amazonaws.com:5432/dairy_drop_prod

# Session Configuration (Redis-based)
# SESSION_EXPIRY=86400          # 24 hours
# STORAGE_TTL_SECONDS=86400     # 24 hours
# REFRESH_EXPIRY=604800         # 7 days
# MAX_SESSIONS_PER_USER=5
# LOGIN_ATTEMPT_WINDOW=900      # 15 min
# MAX_LOGIN_ATTEMPTS=5
# COOKIE_MAX_AGE=86400000       # 24 hours in ms

# JWT Configuration
# JWT_SECRET=GENERATE_STRONG_RANDOM_STRING_MIN_32_CHARS
# JWT_ACCESS_SECRET=GENERATE_STRONG_RANDOM_STRING_MIN_32_CHARS
# JWT_REFRESH_SECRET=GENERATE_STRONG_RANDOM_STRING_MIN_32_CHARS
# JWT_ACCESS_EXPIRES_IN=15m
# JWT_REFRESH_EXPIRES_IN=7d

# Cookie Configuration
# COOKIE_SECRET=GENERATE_STRONG_RANDOM_STRING_MIN_32_CHARS
# COOKIE_DOMAIN=.dairydrop.com

# Rate Limiting
# RATE_LIMIT_WINDOW_MS=15
# RATE_LIMIT_MAX_REQUESTS=100
# LOGIN_RATE_LIMIT_MAX_REQUESTS=5
# OTP_RATE_LIMIT_MAX_REQUESTS=3
# PASSWORD_RESET_RATE_LIMIT_MAX_REQUESTS=3

# Password Hashing
# BCRYPT_SALT_ROUNDS=12

# Email Configuration (Production)
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_SECURE=true
# EMAIL_USER=apikey
# EMAIL_PASSWORD=sg_YOUR_SENDGRID_API_KEY

# CORS Configuration
# ORIGIN_URL=https://dairydrop.com
# SERVER_URL=https://api.dairydrop.com

# AWS Configuration (Production)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=PROD_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=PROD_AWS_SECRET_KEY
# AWS_BUCKET_NAME=dairy-drop-prod

# Redis Configuration (Production - With TLS Auto-enabled)
# REDIS_URL=rediss://prod-redis.aws.elasticache.amazonaws.com:6380
# REDIS_HOST=prod-redis.aws.elasticache.amazonaws.com
# REDIS_PORT=6380
# REDIS_PASSWORD=*Dairy*Drop#
# REDIS_DB=11
# REDIS_MAX_RETRIES=3
# REDIS_RETRY_DELAY=1000
# REDIS_CONNECTION_TIMEOUT=5000

# OTP Configuration (Production)
# OTP_LENGTH=6
# OTP_EXPIRY_MINUTES=5
# RESET_TOKEN_EXPIRY_MINUTES=5

# Feature Flags (Production)
# ALLOW_UNVERIFIED_LOGIN=false

# ============================================
# SECURITY NOTES
# ============================================
# 
# 1. Generate Strong Secrets for Production:
#    - Use: openssl rand -base64 32
#    - Min 32 characters, mixed case, numbers, symbols
#
# 2. Redis Security:
#    - DEV: Basic password (redis://host:6379)
#    - PROD: TLS enabled auto (rediss://host:6380 with NODE_ENV=production)
#    - Password: *Dairy*Drop# (e-commerce standard strength)
#    - DB 11: Isolated database for Dairy Drop
#
# 3. Database:
#    - DEV: Local PostgreSQL
#    - PROD: RDS with encryption, backups, private VPC
#
# 4. Email:
#    - DEV: Mailtrap for testing
#    - PROD: SendGrid or similar with DKIM/SPF
#
# 5. Cookie Security:
#    - httpOnly: true (automatic)
#    - secure: true (auto in production)
#    - sameSite: 'none' (production) / 'lax' (dev)
#
# 6. Never commit .env files to git
#    - Add .env to .gitignore
#    - Use .env.example as template
